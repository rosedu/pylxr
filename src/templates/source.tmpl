<html>
  <head>
	<title>Source code for file <%= filename %></title>
	<link rel="stylesheet" href="style.css" type="text/css">
  </head>
  <body>
	<%@ include file="menu.tmpl" %>
<%
parent = '/'.join(filename.split('/')[:-1])
file = filename.split('/')[-1:][0]
%>
	<p>Source code for file: <a href="?d=<%= parent %>"><%= parent %>/</a><%= file %></p>
	<table><%
i = 0
for line in lines:
    i = i+1
%><tr><td><a name="<%= i %>" href="#<%= i %>"><%= i %></a><td><%
    if line is None:
%></td></tr>
<%
        continue
    for (typ, con) in line:
        # Okay, should have a map, but it's easier this way.
        if typ=='comment':
            %><span class="comment"><%= con %></span><%
        elif typ=='keyword':
            %><span class="keyword"><%= con %></span><%
        elif typ=='identifier':
            if con['link'] is not None:
                %><a href="<%= con['link'] %>"><%= con['disp'] %></a><%
            else:
                %><%= con['disp'] %><%
        elif typ=='string':
            %><span class="string"><%= con %></span><%
        elif typ=='print':
            %><%=  con %><%
        elif typ=='preprocessor':
            %><span class="preproc"><%= con %></span><%
        elif typ=='include':
            %><span class="preproc"><%= con %></span><%
        elif typ=='char':
            %><span class="string"><%= con %></span><%
        else:
            %><%= "^^^" + typ + " ^^^ " + con + "^^^" %><%

    # INDENT
%></td></tr>
<%

%>
	</table>
  </body>
</html>
